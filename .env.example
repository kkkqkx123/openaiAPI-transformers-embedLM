# Embedding Model Provider API 配置示例
# 复制此文件为 .env 并根据需要修改配置

# 模型配置

# 模型存储路径
# Windows: EMB_PROVIDER_MODEL_PATH=D:\models\all-MiniLM-L12-v2
# Linux/Mac: EMB_PROVIDER_MODEL_PATH=/models/all-MiniLM-L12-v2
EMB_PROVIDER_MODEL_PATH=D:\models\all-MiniLM-L12-v2

# 模型名称（用于从 Hugging Face Hub 下载）
EMB_PROVIDER_MODEL_NAME=all-MiniLM-L12-v2

# 处理配置

# 最大批处理大小（同时处理的最大文本数量）
# 建议值：CPU: 8-16, GPU: 16-64
EMB_PROVIDER_MAX_BATCH_SIZE=32

# 最大上下文长度（单个文本的最大 token 数量）
# all-MiniLM-L12-v2 支持的最大长度：512
EMB_PROVIDER_MAX_CONTEXT_LENGTH=512

# 嵌入向量维度
# all-MiniLM-L12-v2 产生的嵌入维度：384
EMB_PROVIDER_EMBEDDING_DIMENSION=384

# 资源配置

# 内存限制
# 格式：数字 + 单位（KB, MB, GB）
EMB_PROVIDER_MEMORY_LIMIT=2GB

# 计算设备
# 可选值：auto（自动选择）, cpu, cuda, mps
EMB_PROVIDER_DEVICE=auto

# API 配置

# 服务器绑定主机
# 生产环境建议：0.0.0.0（接受所有接口的连接）
# 开发环境建议：localhost（仅本地访问）
EMB_PROVIDER_HOST=localhost

# 服务器端口
EMB_PROVIDER_PORT=9000

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别
# 可选值：DEBUG, INFO, WARNING, ERROR
# DEBUG: 包含详细调试信息
# INFO: 一般信息（推荐生产环境使用）
# WARNING: 仅警告和错误
# ERROR: 仅错误信息
EMB_PROVIDER_LOG_LEVEL=INFO

# 示例配置场景

# --- 开发环境配置 ---
# EMB_PROVIDER_HOST=localhost
# EMB_PROVIDER_LOG_LEVEL=DEBUG
# EMB_PROVIDER_MAX_BATCH_SIZE=8

# --- 生产环境配置（CPU） ---
# EMB_PROVIDER_HOST=0.0.0.0
# EMB_PROVIDER_LOG_LEVEL=INFO
# EMB_PROVIDER_DEVICE=cpu
# EMB_PROVIDER_MAX_BATCH_SIZE=64
# EMB_PROVIDER_MEMORY_LIMIT=2GB

# --- 生产环境配置（GPU） ---
# EMB_PROVIDER_HOST=0.0.0.0
# EMB_PROVIDER_LOG_LEVEL=INFO
# EMB_PROVIDER_DEVICE=cuda
# EMB_PROVIDER_MAX_BATCH_SIZE=64
# EMB_PROVIDER_MEMORY_LIMIT=2GB

# --- 资源受限配置 ---
# EMB_PROVIDER_MAX_BATCH_SIZE=4
# EMB_PROVIDER_MEMORY_LIMIT=1GB
# EMB_PROVIDER_DEVICE=cpu