# 模型配置
# Windows: EMB_PROVIDER_MODEL_PATH=D:\models\all-MiniLM-L12-v2
EMB_PROVIDER_MODEL_PATH=D:\models\all-MiniLM-L12-v2

# 模型名称（用于从 Hugging Face Hub 下载）
EMB_PROVIDER_MODEL_NAME=all-MiniLM-L12-v2

# 处理配置

# 最大批处理大小（同时处理的最大文本数量）
EMB_PROVIDER_MAX_BATCH_SIZE=32

# 最大上下文长度（单个文本的最大 token 数量）
# all-MiniLM-L12-v2 支持的最大长度：512
EMB_PROVIDER_MAX_CONTEXT_LENGTH=512

# 嵌入向量维度
EMB_PROVIDER_EMBEDDING_DIMENSION=384

# 批处理优化配置

# 启用动态批处理（根据请求到达情况动态调整批处理大小）
EMB_PROVIDER_ENABLE_DYNAMIC_BATCHING=true

# 动态批处理最大等待时间（毫秒）
EMB_PROVIDER_MAX_WAIT_TIME_MS=100

# 动态批处理最小批次大小
EMB_PROVIDER_MIN_BATCH_SIZE=12

# 启用基于长度的分组（将相似长度的文本分组处理以减少padding开销）
EMB_PROVIDER_ENABLE_LENGTH_GROUPING=true

# 长度分组容忍度（0.1-0.5）
EMB_PROVIDER_LENGTH_GROUP_TOLERANCE=0.2

# 资源配置
EMB_PROVIDER_MEMORY_LIMIT=2GB

# 计算设备
# 可选值：auto（自动选择）, cpu, cuda, mps
EMB_PROVIDER_DEVICE=cpu

# API 配置
EMB_PROVIDER_HOST=localhost

# 服务器端口
EMB_PROVIDER_PORT=9000

# 日志配置
EMB_PROVIDER_LOG_LEVEL=INFO

